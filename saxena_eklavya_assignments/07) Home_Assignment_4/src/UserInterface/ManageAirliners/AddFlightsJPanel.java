/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package UserInterface.ManageAirliners;

import Business.Airliner;
import Business.Schedule;
import Business.Seat;
import java.awt.CardLayout;
import java.awt.Component;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

/**
 *
 * @author eklav
 */
public class AddFlightsJPanel extends javax.swing.JPanel {

    /**
     * Creates new form AddFlightsJPanel
     */
    
    JPanel userProcessContainer;
    Airliner airliner;
    
    public AddFlightsJPanel(JPanel userProcessContainer, Airliner airliner) {
        initComponents();
        this.userProcessContainer = userProcessContainer;
        this.airliner = airliner;
        
        txtAirlinerID.setText(airliner.getAirlinerID());
        btnSaveAddition.setEnabled(false);
        btnAddFlight.setEnabled(true);
    }
    
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        lblAirlinersProfile = new javax.swing.JLabel();
        lblAirliner = new javax.swing.JLabel();
        lblFlightNo = new javax.swing.JLabel();
        lblAirplaneModelNo = new javax.swing.JLabel();
        lblSource = new javax.swing.JLabel();
        lblDestination = new javax.swing.JLabel();
        lblTimeOfDay = new javax.swing.JLabel();
        txtAirlinerID = new javax.swing.JTextField();
        txtFlightNo = new javax.swing.JTextField();
        txtAirplaneModelNo = new javax.swing.JTextField();
        txtSource = new javax.swing.JTextField();
        txtDestination = new javax.swing.JTextField();
        txtTimeOfDay = new javax.swing.JTextField();
        btnAddFlight = new javax.swing.JButton();
        btnSaveAddition = new javax.swing.JButton();
        btnBack = new javax.swing.JButton();
        lblSurgePricing = new javax.swing.JLabel();
        txtSurgePricing = new javax.swing.JTextField();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTextArea1 = new javax.swing.JTextArea();

        setEnabled(false);

        lblAirlinersProfile.setFont(new java.awt.Font("Tahoma", 1, 20)); // NOI18N
        lblAirlinersProfile.setText("Flight Details");

        lblAirliner.setText("Airliner ID:");

        lblFlightNo.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lblFlightNo.setText("Flight No.:");

        lblAirplaneModelNo.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lblAirplaneModelNo.setText("Airplane Model No.:");

        lblSource.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lblSource.setText("Source:");

        lblDestination.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lblDestination.setText("Destination:");

        lblTimeOfDay.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lblTimeOfDay.setText("Time of Day:");

        txtAirlinerID.setEnabled(false);

        txtFlightNo.setEnabled(false);

        txtAirplaneModelNo.setEnabled(false);

        txtSource.setEnabled(false);

        txtDestination.setEnabled(false);

        txtTimeOfDay.setEnabled(false);

        btnAddFlight.setText("Add");
        btnAddFlight.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAddFlightActionPerformed(evt);
            }
        });

        btnSaveAddition.setText("Save New Flight");
        btnSaveAddition.setEnabled(false);
        btnSaveAddition.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSaveAdditionActionPerformed(evt);
            }
        });

        btnBack.setText("<< Back");
        btnBack.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnBackActionPerformed(evt);
            }
        });

        lblSurgePricing.setText("Surge Pricing*:");

        txtSurgePricing.setEnabled(false);

        jTextArea1.setColumns(20);
        jTextArea1.setFont(new java.awt.Font("Monospaced", 3, 16)); // NOI18N
        jTextArea1.setRows(5);
        jTextArea1.setText("*We have a base price of $40 for Window \nSeats, $20 for Middle Seats & $50 for \nAisle Seats.\nSurge Pricing will help you to add that \nmuch DOLLARS to each seat.");
        jTextArea1.setDisabledTextColor(new java.awt.Color(0, 0, 0));
        jTextArea1.setEnabled(false);
        jScrollPane1.setViewportView(jTextArea1);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap(216, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(btnBack)
                    .addComponent(lblAirlinersProfile)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(lblAirliner)
                            .addComponent(lblFlightNo)
                            .addComponent(lblAirplaneModelNo)
                            .addComponent(lblSource)
                            .addComponent(lblDestination)
                            .addComponent(lblTimeOfDay))
                        .addGap(56, 56, 56)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(txtTimeOfDay, javax.swing.GroupLayout.PREFERRED_SIZE, 270, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtDestination, javax.swing.GroupLayout.PREFERRED_SIZE, 270, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtSource, javax.swing.GroupLayout.PREFERRED_SIZE, 270, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtAirplaneModelNo, javax.swing.GroupLayout.PREFERRED_SIZE, 270, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtFlightNo, javax.swing.GroupLayout.PREFERRED_SIZE, 270, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtAirlinerID, javax.swing.GroupLayout.PREFERRED_SIZE, 270, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addComponent(lblSurgePricing)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(btnAddFlight, javax.swing.GroupLayout.PREFERRED_SIZE, 82, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(btnSaveAddition, javax.swing.GroupLayout.PREFERRED_SIZE, 145, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(txtSurgePricing, javax.swing.GroupLayout.PREFERRED_SIZE, 272, javax.swing.GroupLayout.PREFERRED_SIZE)))
                    .addComponent(jScrollPane1))
                .addContainerGap(216, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(24, 24, 24)
                .addComponent(lblAirlinersProfile)
                .addGap(16, 16, 16)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblAirliner)
                    .addComponent(txtAirlinerID, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblFlightNo)
                    .addComponent(txtFlightNo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblAirplaneModelNo)
                    .addComponent(txtAirplaneModelNo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblSource)
                    .addComponent(txtSource, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblDestination)
                    .addComponent(txtDestination, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblTimeOfDay)
                    .addComponent(txtTimeOfDay, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblSurgePricing)
                    .addComponent(txtSurgePricing, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(34, 34, 34)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnAddFlight)
                    .addComponent(btnSaveAddition))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(btnBack)
                .addGap(39, 39, 39))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void btnAddFlightActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAddFlightActionPerformed
        // TODO add your handling code here:
        txtAirplaneModelNo.setEnabled(true);
        txtDestination.setEnabled(true);
        txtFlightNo.setEnabled(true);
        txtSource.setEnabled(true);
        txtTimeOfDay.setEnabled(true);
        txtSurgePricing.setEnabled(true);
        btnSaveAddition.setEnabled(true);
        btnAddFlight.setEnabled(false);
    }//GEN-LAST:event_btnAddFlightActionPerformed

    private void btnSaveAdditionActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSaveAdditionActionPerformed
        // TODO add your handling code here:
        String airlinerID = txtAirlinerID.getText();
        String airplaneModelNo = txtAirplaneModelNo.getText();
        String destination = txtDestination.getText();
        String flightNo = txtFlightNo.getText();
        String source = txtSource.getText();
        String timeOfDay = txtTimeOfDay.getText();
        String surgePricing = txtSurgePricing.getText();
        
        if((airplaneModelNo.equals("") || !(airplaneModelNo.matches("[a-zA-Z0-9]+")))||
                (destination.equals("") || !(destination.matches("[a-zA-Z]+")))||
                (flightNo.equals("") || !(flightNo.matches("[a-zA-Z0-9]+")))||
                (source.equals("") || !(source.matches("[a-zA-Z]+")))||
                (surgePricing.equals("") || !(surgePricing.matches("[0-9]+")))||
                (timeOfDay.equals("") || !(timeOfDay.matches("[a-zA-Z]+")))){
            JOptionPane.showMessageDialog(null,"Invalid Data");
        }
        else{
            Schedule schedule = airliner.addFlight();
            schedule.setAirlinerID(airlinerID);
            schedule.setAirplaneModelNo(airplaneModelNo);
            schedule.setDestination(destination);
            schedule.setFlightNo(flightNo);
            schedule.setSource(source);
            schedule.setTimeOfDay(timeOfDay);
            schedule.setSurgePricing(surgePricing);
            
            for(Seat seat:schedule.getSeats()){
                double seatPrice = seat.getSeatPrice();
                double surgeSeatPrice = seatPrice + Double.parseDouble(surgePricing);
                seat.setSeatPrice(surgeSeatPrice);
            }
            
            int i=1;
            for(Seat seat : schedule.getSeats()){
                System.out.println(i+":SeatNum-->"+seat.getSeatNum()+"\tSeatPrice-->"+seat.getSeatPrice()+"\tCustomerID-->"+seat.getCustomerID());
                i++;
            }

            btnSaveAddition.setEnabled(false);
            btnAddFlight.setEnabled(true);
            
            txtAirplaneModelNo.setText("");
            txtDestination.setText("");
            txtFlightNo.setText("");
            txtSource.setText("");
            txtTimeOfDay.setText("");
            txtSurgePricing.setText("");
            
            txtAirplaneModelNo.setEnabled(false);
            txtDestination.setEnabled(false);
            txtFlightNo.setEnabled(false);
            txtSource.setEnabled(false);
            txtTimeOfDay.setEnabled(false);
            txtSurgePricing.setEnabled(false);

            JOptionPane.showMessageDialog(null, "Flight Added Successfully");
        }
    }//GEN-LAST:event_btnSaveAdditionActionPerformed

    private void btnBackActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnBackActionPerformed
        // TODO add your handling code here:
        userProcessContainer.remove(this);
        Component[] componentArray = userProcessContainer.getComponents();
        Component component = componentArray[componentArray.length - 1];
        ViewAirlinerProfileJPanel viewAirlinerProfileJPanel = (ViewAirlinerProfileJPanel) component;
        viewAirlinerProfileJPanel.populateTable();
        CardLayout layout = (CardLayout)userProcessContainer.getLayout();
        layout.previous(userProcessContainer);
    }//GEN-LAST:event_btnBackActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnAddFlight;
    private javax.swing.JButton btnBack;
    private javax.swing.JButton btnSaveAddition;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTextArea jTextArea1;
    private javax.swing.JLabel lblAirliner;
    private javax.swing.JLabel lblAirlinersProfile;
    private javax.swing.JLabel lblAirplaneModelNo;
    private javax.swing.JLabel lblDestination;
    private javax.swing.JLabel lblFlightNo;
    private javax.swing.JLabel lblSource;
    private javax.swing.JLabel lblSurgePricing;
    private javax.swing.JLabel lblTimeOfDay;
    private javax.swing.JTextField txtAirlinerID;
    private javax.swing.JTextField txtAirplaneModelNo;
    private javax.swing.JTextField txtDestination;
    private javax.swing.JTextField txtFlightNo;
    private javax.swing.JTextField txtSource;
    private javax.swing.JTextField txtSurgePricing;
    private javax.swing.JTextField txtTimeOfDay;
    // End of variables declaration//GEN-END:variables
}
