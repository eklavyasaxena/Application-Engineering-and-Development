/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package UserInterface.ManageAirliners;

import Business.Schedule;
import java.awt.CardLayout;
import java.awt.Component;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

/**
 *
 * @author eklav
 */
public class ViewFlightsJPanel extends javax.swing.JPanel {

    /**
     * Creates new form ViewFlightsJPanel
     */
    
    JPanel userProcessContainer;
    Schedule schedule;
    
    public ViewFlightsJPanel(JPanel userProcessContainer, Schedule schedule) {
        initComponents();
        this.userProcessContainer = userProcessContainer;
        this.schedule = schedule;
        
        populateFlightDetails();
        btnSaveUpdate.setEnabled(false);
        btnUpdate.setEnabled(true);        
    }
    
    private void populateFlightDetails(){
        txtAirlinerID.setText(schedule.getAirlinerID());
        txtAirplaneModelNo.setText(schedule.getAirplaneModelNo());
        txtDestination.setText(schedule.getDestination());
        txtFlightNo.setText(schedule.getFlightNo());
        txtSource.setText(schedule.getSource());
        txtTimeOfDay.setText(schedule.getTimeOfDay());
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        lblAirlinersProfile = new javax.swing.JLabel();
        btnUpdate = new javax.swing.JButton();
        lblFlightNo = new javax.swing.JLabel();
        lblAirplaneModelNo = new javax.swing.JLabel();
        btnBack = new javax.swing.JButton();
        btnSaveUpdate = new javax.swing.JButton();
        lblSource = new javax.swing.JLabel();
        txtSource = new javax.swing.JTextField();
        lblDestination = new javax.swing.JLabel();
        txtDestination = new javax.swing.JTextField();
        lblTimeOfDay = new javax.swing.JLabel();
        txtTimeOfDay = new javax.swing.JTextField();
        txtFlightNo = new javax.swing.JTextField();
        txtAirplaneModelNo = new javax.swing.JTextField();
        lblAirliner = new javax.swing.JLabel();
        txtAirlinerID = new javax.swing.JTextField();

        lblAirlinersProfile.setFont(new java.awt.Font("Tahoma", 1, 20)); // NOI18N
        lblAirlinersProfile.setText("Flight Details");

        btnUpdate.setText("Update");
        btnUpdate.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnUpdateActionPerformed(evt);
            }
        });

        lblFlightNo.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lblFlightNo.setText("Flight No.:");

        lblAirplaneModelNo.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lblAirplaneModelNo.setText("Airplane Model No.:");

        btnBack.setText("<< Back");
        btnBack.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnBackActionPerformed(evt);
            }
        });

        btnSaveUpdate.setText("Save Update");
        btnSaveUpdate.setEnabled(false);
        btnSaveUpdate.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSaveUpdateActionPerformed(evt);
            }
        });

        lblSource.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lblSource.setText("Source:");

        txtSource.setEnabled(false);

        lblDestination.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lblDestination.setText("Destination:");

        txtDestination.setEnabled(false);

        lblTimeOfDay.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        lblTimeOfDay.setText("Time of Day:");

        txtTimeOfDay.setEnabled(false);

        txtFlightNo.setEnabled(false);

        txtAirplaneModelNo.setEnabled(false);

        lblAirliner.setText("Airliner ID:");

        txtAirlinerID.setEnabled(false);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap(47, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(155, 155, 155)
                        .addComponent(lblAirlinersProfile))
                    .addComponent(btnBack)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(81, 81, 81)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(lblAirliner)
                            .addComponent(lblFlightNo)
                            .addComponent(lblAirplaneModelNo)
                            .addComponent(lblSource)
                            .addComponent(lblDestination)
                            .addComponent(lblTimeOfDay))
                        .addGap(66, 66, 66)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(txtTimeOfDay, javax.swing.GroupLayout.PREFERRED_SIZE, 270, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtDestination, javax.swing.GroupLayout.PREFERRED_SIZE, 270, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtSource, javax.swing.GroupLayout.PREFERRED_SIZE, 270, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtAirplaneModelNo, javax.swing.GroupLayout.PREFERRED_SIZE, 270, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(txtFlightNo, javax.swing.GroupLayout.PREFERRED_SIZE, 270, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(layout.createSequentialGroup()
                                .addComponent(btnUpdate)
                                .addGap(42, 42, 42)
                                .addComponent(btnSaveUpdate, javax.swing.GroupLayout.PREFERRED_SIZE, 145, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addComponent(txtAirlinerID, javax.swing.GroupLayout.PREFERRED_SIZE, 270, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addContainerGap(294, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(7, 7, 7)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addComponent(lblAirlinersProfile)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(txtAirlinerID, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(16, 16, 16))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(45, 45, 45)
                        .addComponent(lblAirliner)))
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lblFlightNo)
                    .addComponent(txtFlightNo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lblAirplaneModelNo)
                    .addComponent(txtAirplaneModelNo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lblSource)
                    .addComponent(txtSource, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lblDestination)
                    .addComponent(txtDestination, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(lblTimeOfDay)
                    .addComponent(txtTimeOfDay, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(42, 42, 42)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnUpdate)
                    .addComponent(btnSaveUpdate))
                .addGap(194, 194, 194)
                .addComponent(btnBack)
                .addContainerGap())
        );
    }// </editor-fold>//GEN-END:initComponents

    private void btnUpdateActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnUpdateActionPerformed
        // TODO add your handling code here:
        txtAirplaneModelNo.setEnabled(true);
        txtDestination.setEnabled(true);
        txtFlightNo.setEnabled(true);
        txtSource.setEnabled(true);
        txtTimeOfDay.setEnabled(true);
        btnSaveUpdate.setEnabled(true);
        btnUpdate.setEnabled(false);
    }//GEN-LAST:event_btnUpdateActionPerformed

    private void btnBackActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnBackActionPerformed
        // TODO add your handling code here:
        userProcessContainer.remove(this);
        Component[] componentArray = userProcessContainer.getComponents();
        Component component = componentArray[componentArray.length - 1];
        ViewAirlinerProfileJPanel viewAirlinerProfileJPanel = (ViewAirlinerProfileJPanel) component;
        viewAirlinerProfileJPanel.populateTable();
        CardLayout layout = (CardLayout)userProcessContainer.getLayout();
        layout.previous(userProcessContainer);
    }//GEN-LAST:event_btnBackActionPerformed

    private void btnSaveUpdateActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSaveUpdateActionPerformed
        // TODO add your handling code here:
        String airlinerID = txtAirlinerID.getText();
        String airplaneModelNo = txtAirplaneModelNo.getText();
        String destination = txtDestination.getText();
        String flightNo = txtFlightNo.getText();
        String source = txtSource.getText();
        String timeOfDay = txtTimeOfDay.getText();
        
        if((airplaneModelNo.equals("") || !(airplaneModelNo.matches("[a-zA-Z0-9]+")))||
                (destination.equals("") || !(destination.matches("[a-zA-Z]+")))||
                (flightNo.equals("") || !(flightNo.matches("[a-zA-Z0-9]+")))||
                (source.equals("") || !(source.matches("[a-zA-Z]+")))||
                (timeOfDay.equals("") || !(timeOfDay.matches("[a-zA-Z]+")))){
            JOptionPane.showMessageDialog(null,"Invalid Data");
        }
        else{
            schedule.setAirlinerID(airlinerID);
            schedule.setAirplaneModelNo(airplaneModelNo);
            schedule.setDestination(destination);
            schedule.setFlightNo(flightNo);
            schedule.setSource(source);
            schedule.setTimeOfDay(timeOfDay);

            btnSaveUpdate.setEnabled(false);
            btnUpdate.setEnabled(true);
            
            txtAirplaneModelNo.setEnabled(false);
            txtDestination.setEnabled(false);
            txtFlightNo.setEnabled(false);
            txtSource.setEnabled(false);
            txtTimeOfDay.setEnabled(false);

            JOptionPane.showMessageDialog(null, "Flight Updated Successfully");
        }
    }//GEN-LAST:event_btnSaveUpdateActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnBack;
    private javax.swing.JButton btnSaveUpdate;
    private javax.swing.JButton btnUpdate;
    private javax.swing.JLabel lblAirliner;
    private javax.swing.JLabel lblAirlinersProfile;
    private javax.swing.JLabel lblAirplaneModelNo;
    private javax.swing.JLabel lblDestination;
    private javax.swing.JLabel lblFlightNo;
    private javax.swing.JLabel lblSource;
    private javax.swing.JLabel lblTimeOfDay;
    private javax.swing.JTextField txtAirlinerID;
    private javax.swing.JTextField txtAirplaneModelNo;
    private javax.swing.JTextField txtDestination;
    private javax.swing.JTextField txtFlightNo;
    private javax.swing.JTextField txtSource;
    private javax.swing.JTextField txtTimeOfDay;
    // End of variables declaration//GEN-END:variables
}
